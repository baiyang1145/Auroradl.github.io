<!DOCTYPE html>
<html lang="zh-CN" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æå…‰ä¸‹è½½å™¨ - Aurora Downloader</title>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- é…ç½® Tailwind æ·±è‰²æ¨¡å¼ -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#a855f7',
                    }
                }
            }
        }
    </script>
    <style>
        /* è‡ªå®šä¹‰ä¸€äº›è¿‡æ¸¡åŠ¨ç”» */
        body { transition: background-color 0.3s, color 0.3s; }
        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
        }
        .dark .glass {
            background: rgba(31, 41, 55, 0.7);
        }
        .fade-enter-active, .fade-leave-active { transition: opacity 0.5s ease; }
        .fade-enter-from, .fade-leave-to { opacity: 0; }
        
        .pop-enter-active, .pop-leave-active { transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .pop-enter-from, .pop-leave-to { opacity: 0; transform: scale(0.8); }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-gray-100 min-h-screen font-sans antialiased selection:bg-primary selection:text-white">

    <div id="app" class="relative min-h-screen flex flex-col">
        
        <!-- å¯¼èˆªæ  -->
        <nav class="fixed w-full z-50 glass border-b border-gray-200 dark:border-gray-700 shadow-sm">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center gap-2">
                        <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white font-bold">A</div>
                        <span class="font-bold text-xl tracking-tight">Aurora<span class="text-primary">DL</span></span>
                    </div>
                    
                    <div class="flex items-center gap-4">
                        <!-- ä¸»é¢˜åˆ‡æ¢æŒ‰é’® -->
                        <button @click="toggleTheme" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                            <span v-if="!isDark">ğŸŒ</span>
                            <span v-else>ğŸŒ™</span>
                        </button>

                        <!-- ç”¨æˆ·çŠ¶æ€ -->
                        <div v-if="currentUser" class="flex items-center gap-3">
                            <span class="hidden sm:block font-medium">{{ currentUser.username }}</span>
                            <button @click="logout" class="text-sm text-red-500 hover:text-red-600 font-medium">é€€å‡º</button>
                        </div>
                        <div v-else>
                            <button @click="showAuthModal('login')" class="px-4 py-2 text-sm font-medium text-white bg-primary hover:bg-indigo-600 rounded-lg transition-colors shadow-lg shadow-indigo-500/30">
                                ç™»å½• / æ³¨å†Œ
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ (åªæœ‰ç™»å½•åå¯è§ï¼Œæˆ–è€…å±•ç¤ºç™»å½•å¼•å¯¼) -->
        <main class="flex-grow pt-24 pb-12 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto w-full">
            
            <!-- å¦‚æœæœªç™»å½•ï¼Œæ˜¾ç¤ºå¼•å¯¼é¡µ -->
            <div v-if="!currentUser" class="text-center py-20">
                <h1 class="text-4xl md:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary mb-6">
                    æé€Ÿä¸‹è½½ï¼Œè§¦æ‰‹å¯åŠ
                </h1>
                <p class="text-lg text-gray-600 dark:text-gray-400 mb-8 max-w-2xl mx-auto">
                    è¯·ç™»å½•ä»¥è®¿é—®æˆ‘ä»¬çš„ä¸“å±èµ„æºåº“ã€‚æˆ‘ä»¬æä¾›æœ€ä¼˜è´¨çš„è®¾è®¡ç´ æã€å¼€å‘å·¥å…·åŠæ›´å¤šå†…å®¹ã€‚
                </p>
                <button @click="showAuthModal('register')" class="px-8 py-3 text-lg font-bold text-white bg-gradient-to-r from-primary to-secondary rounded-full hover:shadow-xl hover:scale-105 transition-all duration-300">
                    ç«‹å³åŠ å…¥
                </button>
            </div>

            <!-- ç™»å½•åæ˜¾ç¤ºçš„èµ„æºåˆ—è¡¨ -->
            <div v-else>
                <div class="flex justify-between items-end mb-8">
                    <div>
                        <h2 class="text-2xl font-bold">çƒ­é—¨èµ„æº</h2>
                        <p class="text-gray-500 dark:text-gray-400">ä¸ºæ‚¨ç²¾é€‰çš„æœ€æ–°ä¸‹è½½å†…å®¹</p>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- èµ„æºå¡ç‰‡å¾ªç¯ -->
                    <div v-for="(item, index) in downloads" :key="index" 
                         class="group bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-lg hover:shadow-2xl border border-gray-100 dark:border-gray-700 transition-all duration-300 hover:-translate-y-1">
                        <div class="flex items-start justify-between mb-4">
                            <div class="p-3 rounded-xl bg-gray-100 dark:bg-gray-700 text-2xl">
                                {{ item.icon }}
                            </div>
                            <span class="px-2 py-1 text-xs font-semibold text-green-600 bg-green-100 rounded-md dark:bg-green-900 dark:text-green-300">v{{ item.version }}</span>
                        </div>
                        <h3 class="text-xl font-bold mb-2 group-hover:text-primary transition-colors">{{ item.name }}</h3>
                        <p class="text-gray-600 dark:text-gray-400 text-sm mb-6 line-clamp-2">
                            {{ item.desc }}
                        </p>
                        <a :href="item.link" target="_blank" 
                           class="block w-full py-2.5 text-center text-white font-medium bg-gray-900 dark:bg-primary rounded-xl hover:opacity-90 transition-opacity">
                           ç«‹å³ä¸‹è½½
                        </a>
                    </div>
                </div>
            </div>
        </main>

        <!-- é¡µè„š -->
        <footer class="py-6 text-center text-gray-500 dark:text-gray-600 text-sm">
            &copy; 2023 Aurora Downloader. All rights reserved.
        </footer>

        <!-- ç™»å½•/æ³¨å†Œ æ¨¡æ€æ¡† -->
        <transition name="fade">
            <div v-if="authModal.show" class="fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm" @click.self="closeAuthModal">
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all">
                    <div class="p-8">
                        <h2 class="text-2xl font-bold mb-6 text-center">
                            {{ authModal.type === 'login' ? 'æ¬¢è¿å›æ¥' : 'åˆ›å»ºè´¦å·' }}
                        </h2>
                        
                        <form @submit.prevent="handleAuth">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium mb-1">ç”¨æˆ·å</label>
                                    <input v-model="form.username" type="text" required class="w-full px-4 py-2 rounded-lg bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:ring-2 focus:ring-primary focus:outline-none">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">å¯†ç </label>
                                    <input v-model="form.password" type="password" required class="w-full px-4 py-2 rounded-lg bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 focus:ring-2 focus:ring-primary focus:outline-none">
                                </div>
                            </div>
                            
                            <div class="mt-6">
                                <button type="submit" class="w-full py-3 bg-primary hover:bg-indigo-600 text-white font-bold rounded-lg transition-colors">
                                    {{ authModal.type === 'login' ? 'ç™» å½•' : 'æ³¨ å†Œ' }}
                                </button>
                            </div>
                        </form>

                        <div class="mt-4 text-center text-sm text-gray-500">
                            <span v-if="authModal.type === 'login'">è¿˜æ²¡æœ‰è´¦å·? <a href="#" @click.prevent="authModal.type = 'register'" class="text-primary hover:underline">å»æ³¨å†Œ</a></span>
                            <span v-else>å·²æœ‰è´¦å·? <a href="#" @click.prevent="authModal.type = 'login'" class="text-primary hover:underline">å»ç™»å½•</a></span>
                        </div>
                    </div>
                </div>
            </div>
        </transition>

        <!-- æ¬¢è¿å¼¹çª— (æœ¬æœºå†æ¬¡æ‰“å¼€æˆ–ç™»å½•æˆåŠŸæ—¶æ˜¾ç¤º) -->
        <transition name="pop">
            <div v-if="showWelcome" class="fixed top-24 right-4 z-[70] max-w-sm w-full">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-2xl p-4 border-l-4 border-primary flex items-start gap-4">
                    <div class="text-3xl">ğŸ‘‹</div>
                    <div>
                        <h4 class="font-bold text-lg">æ¬¢è¿å›æ¥, {{ currentUser.username }}!</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400">å¾ˆé«˜å…´å†æ¬¡è§åˆ°ä½ ï¼Œå‡†å¤‡å¥½ä¸‹è½½äº†å—ï¼Ÿ</p>
                    </div>
                    <button @click="showWelcome = false" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 ml-auto">&times;</button>
                </div>
            </div>
        </transition>

    </div>

    <script>
        const { createApp, ref, onMounted, reactive } = Vue;

        createApp({
            setup() {
                // --- çŠ¶æ€ç®¡ç† ---
                const isDark = ref(false);
                const currentUser = ref(null);
                const showWelcome = ref(false);
                const authModal = reactive({ show: false, type: 'login' }); // login or register
                const form = reactive({ username: '', password: '' });
                
                // --- æ¨¡æ‹Ÿæ•°æ®åº“æ•°æ® ---
                const downloads = [
                    { name: 'PhotoShop 2024', version: '25.0', icon: 'ğŸ¨', desc: 'å…¨çƒé¢†å…ˆçš„å›¾åƒå¤„ç†å’Œè®¾è®¡è½¯ä»¶ï¼Œå¸¦AIç”Ÿæˆå¡«å……åŠŸèƒ½ã€‚', link: 'https://www.adobe.com/products/photoshop.html' },
                    { name: 'VS Code', version: '1.83', icon: 'ğŸ’»', desc: 'è½»é‡çº§ä½†åŠŸèƒ½å¼ºå¤§çš„æºä»£ç ç¼–è¾‘å™¨ï¼Œæ”¯æŒå¤šç§æ’ä»¶ã€‚', link: 'https://code.visualstudio.com/' },
                    { name: 'Node.js', version: '20.0 LTS', icon: 'ğŸš€', desc: 'åŸºäºChrome V8å¼•æ“çš„JavaScriptè¿è¡Œæ—¶ç¯å¢ƒã€‚', link: 'https://nodejs.org/' },
                    { name: 'Blender', version: '3.6', icon: 'ğŸ§Š', desc: 'å¼€æºçš„3Dåˆ›ä½œå¥—ä»¶ï¼Œæ”¯æŒå»ºæ¨¡ã€åŠ¨ç”»ã€æ¸²æŸ“ã€‚', link: 'https://www.blender.org/' },
                    { name: 'Figma Desktop', version: 'Latest', icon: 'âœ’ï¸', desc: 'åä½œå¼ç•Œé¢è®¾è®¡å·¥å…·ï¼Œè®©è®¾è®¡æ›´æµç•…ã€‚', link: 'https://www.figma.com/downloads/' },
                    { name: 'Docker', version: '4.2', icon: 'ğŸ³', desc: 'å¼€å‘äººå‘˜æ„å»ºã€è¿è¡Œå’Œå…±äº«åº”ç”¨ç¨‹åºçš„å¹³å°ã€‚', link: 'https://www.docker.com/' },
                ];

                // --- æ–¹æ³• ---

                // 1. ä¸»é¢˜åˆ‡æ¢é€»è¾‘
                const toggleTheme = () => {
                    isDark.value = !isDark.value;
                    if (isDark.value) {
                        document.documentElement.classList.add('dark');
                        localStorage.setItem('theme', 'dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                        localStorage.setItem('theme', 'light');
                    }
                };

                // 2. æ¨¡æ€æ¡†æ§åˆ¶
                const showAuthModal = (type) => {
                    authModal.type = type;
                    authModal.show = true;
                    form.username = '';
                    form.password = '';
                };
                const closeAuthModal = () => authModal.show = false;

                // 3. è®¤è¯é€»è¾‘ (æ¨¡æ‹Ÿåç«¯)
                const handleAuth = () => {
                    const users = JSON.parse(localStorage.getItem('users_db') || '[]');
                    
                    if (authModal.type === 'register') {
                        // æ³¨å†Œé€»è¾‘
                        const existing = users.find(u => u.username === form.username);
                        if (existing) {
                            alert('ç”¨æˆ·åå·²å­˜åœ¨ï¼');
                            return;
                        }
                        const newUser = { username: form.username, password: form.password }; // æ³¨æ„ï¼šå®é™…å¼€å‘å¿…é¡»åŠ å¯†å¯†ç 
                        users.push(newUser);
                        localStorage.setItem('users_db', JSON.stringify(users));
                        alert('æ³¨å†ŒæˆåŠŸï¼Œè¯·ç™»å½•ï¼');
                        authModal.type = 'login';
                    } else {
                        // ç™»å½•é€»è¾‘
                        const user = users.find(u => u.username === form.username && u.password === form.password);
                        if (user) {
                            loginSuccess(user);
                        } else {
                            alert('ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ (å¦‚æœæ‚¨æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œè¯·å…ˆç‚¹å‡»æ³¨å†Œ)');
                        }
                    }
                };

                const loginSuccess = (user) => {
                    currentUser.value = user;
                    localStorage.setItem('session_user', JSON.stringify(user)); // è®°ä½ç™»å½•çŠ¶æ€
                    closeAuthModal();
                    triggerWelcome();
                };

                const logout = () => {
                    currentUser.value = null;
                    localStorage.removeItem('session_user');
                    showWelcome.value = false;
                };

                // 4. æ¬¢è¿å¼¹çª—é€»è¾‘
                const triggerWelcome = () => {
                    showWelcome.value = true;
                    // 5ç§’åè‡ªåŠ¨æ¶ˆå¤±
                    setTimeout(() => {
                        showWelcome.value = false;
                    }, 5000);
                };

                // --- ç”Ÿå‘½å‘¨æœŸ ---
                onMounted(() => {
                    // åˆå§‹åŒ–ä¸»é¢˜
                    const savedTheme = localStorage.getItem('theme');
                    const systemDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                    if (savedTheme === 'dark' || (!savedTheme && systemDark)) {
                        isDark.value = true;
                        document.documentElement.classList.add('dark');
                    }

                    // æ£€æŸ¥è‡ªåŠ¨ç™»å½• (ç¬¬äºŒæ¬¡æ‰“å¼€ä¸ç”¨å†ç™»å½•)
                    const session = localStorage.getItem('session_user');
                    if (session) {
                        currentUser.value = JSON.parse(session);
                        // å¦‚æœå·²ç™»å½•ï¼Œå¼¹å‡ºæ¬¢è¿
                        setTimeout(() => triggerWelcome(), 500); 
                    }
                });

                return {
                    isDark,
                    toggleTheme,
                    currentUser,
                    downloads,
                    authModal,
                    showAuthModal,
                    closeAuthModal,
                    form,
                    handleAuth,
                    logout,
                    showWelcome
                };
            }
        }).mount('#app');
    </script>
</body>
</html>